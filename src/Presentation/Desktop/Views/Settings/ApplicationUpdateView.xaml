<UserControl x:Class="Desktop.Views.Settings.ApplicationUpdateView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Desktop.Views.Settings"
             xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:vms="clr-namespace:Desktop.ViewModels.Update"
             xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800"
             DataContext="{Binding Source={StaticResource Locator},Path=ApplicationUpdateViewModel}"
             x:Name="_userControlRoot">
    <UserControl.Resources>
        <DataTemplate DataType="{x:Type vms:ApplicationUpdateViewModel}">
            <local:ApplicationUpdateView/>
        </DataTemplate>
    </UserControl.Resources>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Loaded">
            <i:InvokeCommandAction Command="{Binding LoadCommand}" />
        </i:EventTrigger>
    </i:Interaction.Triggers>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="10*"/>
            <RowDefinition Height="90*"/>
        </Grid.RowDefinitions>
        <Button Content="Check for Updates" 
                Background="{StaticResource MaterialDesignBodyLight}"                
                Grid.Row="0"
                Command="{Binding UpdateApplicationCommand}"
                />
        <md:ColorZone Grid.Row="1">
            <StackPanel>
                <Label Content="Update Settings" 
                       Background="Transparent"
                       HorizontalAlignment="Center"
                       FontSize="24"/>
                <StackPanel DataContext="{Binding Path=AppUpdateSettingsModel}">
                    <TextBox md:HintAssist.Hint="Update File Url" Text="{Binding UpdateFileUrl,Mode=TwoWay}"/>
                    <TextBox md:HintAssist.Hint="Dsa Public Key" Text="{Binding DsaPublicKey,Mode=TwoWay}"/>
                    <StackPanel Orientation="Horizontal">
                        <Label Content="Update Silently?" />
                        <RibbonCheckBox IsChecked="{Binding ShouldUpdateSilently}"/>
                    </StackPanel>
                </StackPanel>
                <Button Content="Save Changes" 
                            Command="{Binding EditUpdateSettingsCommand}" 
                            CommandParameter="{Binding AppUpdateSettingsModel}" />
            </StackPanel>
        </md:ColorZone>

    </Grid>
</UserControl>
